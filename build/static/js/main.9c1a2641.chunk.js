(this.webpackJsonpDevo=this.webpackJsonpDevo||[]).push([[0],{406:function(e){e.exports=JSON.parse('[{"inputs":[{"internalType":"address","name":"_address","type":"address"},{"internalType":"string","name":"_name","type":"string"},{"internalType":"string","name":"_age","type":"string"},{"internalType":"string","name":"_image","type":"string"},{"internalType":"string","name":"_description","type":"string"}],"name":"addCandidate","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"address","name":"_address","type":"address"}],"name":"giveVotingRight","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[],"stateMutability":"nonpayable","type":"constructor"},{"inputs":[{"internalType":"uint256","name":"candidateId","type":"uint256"},{"internalType":"uint256","name":"_ammount","type":"uint256"}],"name":"vote","outputs":[],"stateMutability":"payable","type":"function"},{"inputs":[{"internalType":"uint256","name":"","type":"uint256"}],"name":"candidates","outputs":[{"internalType":"address","name":"candidateAddress","type":"address"},{"internalType":"string","name":"name","type":"string"},{"internalType":"string","name":"age","type":"string"},{"internalType":"string","name":"image","type":"string"},{"internalType":"string","name":"description","type":"string"},{"internalType":"uint256","name":"voteCount","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"uint256","name":"_index","type":"uint256"}],"name":"getCandidate","outputs":[{"internalType":"address","name":"","type":"address"},{"internalType":"string","name":"","type":"string"},{"internalType":"string","name":"","type":"string"},{"internalType":"string","name":"","type":"string"},{"internalType":"string","name":"","type":"string"},{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"getCandidateLength","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"getVoterLength","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"getVotersList","outputs":[{"internalType":"address[]","name":"","type":"address[]"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"address","name":"","type":"address"}],"name":"voters","outputs":[{"internalType":"address","name":"voterAddress","type":"address"},{"internalType":"uint256","name":"voterAllowed","type":"uint256"},{"internalType":"uint256","name":"voterVote","type":"uint256"},{"internalType":"bool","name":"voterVoted","type":"bool"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"uint256","name":"","type":"uint256"}],"name":"votersAddress","outputs":[{"internalType":"address","name":"","type":"address"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"votingOrganizer","outputs":[{"internalType":"address","name":"","type":"address"}],"stateMutability":"view","type":"function"}]')},407:function(e){e.exports=JSON.parse('[{"anonymous":false,"inputs":[{"indexed":true,"internalType":"address","name":"owner","type":"address"},{"indexed":true,"internalType":"address","name":"spender","type":"address"},{"indexed":false,"internalType":"uint256","name":"value","type":"uint256"}],"name":"Approval","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"internalType":"address","name":"from","type":"address"},{"indexed":true,"internalType":"address","name":"to","type":"address"},{"indexed":false,"internalType":"uint256","name":"value","type":"uint256"}],"name":"Transfer","type":"event"},{"inputs":[{"internalType":"address","name":"","type":"address"},{"internalType":"address","name":"","type":"address"}],"name":"allowance","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"address","name":"","type":"address"},{"internalType":"uint256","name":"","type":"uint256"}],"name":"approve","outputs":[{"internalType":"bool","name":"","type":"bool"}],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"address","name":"","type":"address"}],"name":"balanceOf","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"totalSupply","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"address","name":"","type":"address"},{"internalType":"uint256","name":"","type":"uint256"}],"name":"transfer","outputs":[{"internalType":"bool","name":"","type":"bool"}],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"address","name":"","type":"address"},{"internalType":"address","name":"","type":"address"},{"internalType":"uint256","name":"","type":"uint256"}],"name":"transferFrom","outputs":[{"internalType":"bool","name":"","type":"bool"}],"stateMutability":"nonpayable","type":"function"}]')},414:function(e,t,n){},416:function(e,t,n){},432:function(e,t){},433:function(e,t){},435:function(e,t){},439:function(e,t){},463:function(e,t){},465:function(e,t){},479:function(e,t){},481:function(e,t){},509:function(e,t){},511:function(e,t){},600:function(e,t){},601:function(e,t){},693:function(e,t){},698:function(e,t){},880:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),s=n(58),i=n.n(s),c=(n(414),n(68)),o=n(17),u=n(23),d=n.n(u),l=(n(416),n(888)),p=n(883),y=n(889),b=n(884),j=n(885),m=n(891),f=n(890),h=n(402),x=n(1),O=function(e){var t=Object(a.useState)(""),n=Object(o.a)(t,2),r=n[0],s=n[1],i=Object(a.useState)(""),c=Object(o.a)(i,2),u=c[0],d=c[1],O=Object(a.useState)(""),g=Object(o.a)(O,2),v=g[0],T=g[1],w=Object(a.useState)(""),C=Object(o.a)(w,2),k=C[0],S=C[1],A=Object(a.useState)(""),N=Object(o.a)(A,2),M=N[0],F=N[1],V=Object(a.useState)(""),B=Object(o.a)(V,2),I=B[0],D=B[1],E=Object(a.useState)(!1),_=Object(o.a)(E,2),L=_[0],H=_[1],R=function(){return H(!1)},U=Object(a.useState)(!1),J=Object(o.a)(U,2),P=J[0],z=J[1],G=function(){return z(!1)};return Object(x.jsxs)(x.Fragment,{children:[Object(x.jsx)(l.a,{bg:"light",children:Object(x.jsxs)(p.a,{children:[Object(x.jsx)(l.a.Brand,{href:"#home",children:"Devote"}),Object(x.jsx)(l.a.Toggle,{}),Object(x.jsx)(y.a,{className:"me-auto",children:Object(x.jsxs)(b.a,{bg:"secondary",className:"ms-auto",children:["Balance ",e.cUSDBalance,"cUSD"]})}),Object(x.jsxs)(l.a.Collapse,{className:"justify-content-end",children:[Object(x.jsx)(j.a,{onClick:function(){return H(!0)},variant:"dark",children:Object(x.jsx)("h5",{children:" Add Candidate "})}),Object(x.jsx)(j.a,{onClick:function(){return z(!0)},variant:"dark",children:Object(x.jsx)("h5",{children:" Give Voting Right "})})]})]})}),Object(x.jsxs)(m.a,{show:L,onHide:R,centered:!0,children:[Object(x.jsx)(m.a.Header,{closeButton:!0,children:Object(x.jsx)(m.a.Title,{children:"New Candidate"})}),Object(x.jsx)(f.a,{children:Object(x.jsxs)(m.a.Body,{children:[Object(x.jsx)(h.a,{controlId:"inputAddress",label:"CandidateAddress",className:"mb-3",children:Object(x.jsx)(f.a.Control,{type:"text",onChange:function(e){s(e.target.value)},placeholder:"Candidate Address"})}),Object(x.jsx)(h.a,{controlId:"inputName",label:"Name of Candidate",className:"mb-3",children:Object(x.jsx)(f.a.Control,{type:"text",onChange:function(e){d(e.target.value)},placeholder:"name of candidate"})}),Object(x.jsx)(h.a,{controlId:"inputAge",label:"Age",className:"mb-3",children:Object(x.jsx)(f.a.Control,{type:"number",onChange:function(e){T(e.target.value)},placeholder:"Age"})}),Object(x.jsx)(h.a,{controlId:"inputImage",label:"Image",className:"mb-3",children:Object(x.jsx)(f.a.Control,{type:"text",onChange:function(e){S(e.target.value)},placeholder:"Image"})}),Object(x.jsx)(h.a,{controlId:"inputDescription",label:"Description",className:"mb-3",children:Object(x.jsx)(f.a.Control,{as:"textarea",placeholder:"description",style:{height:"80px"},onChange:function(e){F(e.target.value)}})})]})}),Object(x.jsxs)(m.a.Footer,{children:[Object(x.jsx)(j.a,{variant:"outline-secondary",onClick:R,children:"Close"}),Object(x.jsx)(j.a,{variant:"dark",disabled:!(r&&u&&v&&k&&M),onClick:function(){e.addCandidate(r,u,v,k,M),R()},children:"Add Candidate"})]})]}),Object(x.jsxs)(m.a,{show:P,onHide:G,centered:!0,children:[Object(x.jsx)(m.a.Header,{closeButton:!0,children:Object(x.jsx)(m.a.Title,{children:"New Voter"})}),Object(x.jsx)(f.a,{children:Object(x.jsx)(m.a.Body,{children:Object(x.jsx)(h.a,{controlId:"inputAddress",label:"VoterAddress",className:"mb-3",children:Object(x.jsx)(f.a.Control,{type:"text",onChange:function(e){D(e.target.value)},placeholder:"Voter Address"})})})}),Object(x.jsxs)(m.a.Footer,{children:[Object(x.jsx)(j.a,{variant:"outline-secondary",onClick:G,children:"Close"}),Object(x.jsx)(j.a,{variant:"dark",disabled:!I,onClick:function(){e.giveVotingRight(I),G()},children:"Give voting right"})]})]})]})},g=n(886),v=n(401),T=n(892),w=n(893),C=function(e){return Object(x.jsx)(g.a,{xs:1,md:3,className:"g-4",children:e.candidates.map((function(t){return Object(x.jsx)(v.a,{children:Object(x.jsxs)(T.a,{className:" h-100",children:[Object(x.jsx)(T.a.Header,{children:Object(x.jsxs)(w.a,{direction:"horizontal",gap:2,children:[Object(x.jsxs)(b.a,{bg:"secondary",className:"ms-auto",children:[t.index," ID"]}),Object(x.jsxs)(b.a,{bg:"secondary",className:"ms-auto",children:[t.voteCount," vote count"]})]})}),Object(x.jsx)("div",{className:" ratio ratio-4x3",children:Object(x.jsx)("img",{src:t.image,alt:t.description,style:{objectFit:"cover"}})}),Object(x.jsxs)(T.a.Body,{className:"d-flex  flex-column text-center",children:[Object(x.jsx)(T.a.Title,{children:t.name}),Object(x.jsxs)(T.a.Title,{children:["Age: ",t.age]}),Object(x.jsx)(T.a.Text,{className:"flex-grow-1",children:t.description}),Object(x.jsx)(j.a,{variant:"primary mt-2",onClick:function(){return e.vote(t.index)},children:"Vote for this candidate 1cUSD"})]})]})},t.index)}))})},k=n(403),S=n.n(k),A=n(405),N=n(29),M=n.n(N),F=n(406),V=n(407),B=n(894),I=function(e){var t=e.voters;return Object(x.jsxs)(x.Fragment,{children:[Object(x.jsx)("h1",{children:" Voters "}),t.map((function(e){return Object(x.jsx)(B.a,{className:"mb-2",children:Object(x.jsx)(B.a.Item,{children:e})})}))]})},D="0x3456A620e67891a333F934584F332E4460F4E043";var E=function(){var e=Object(a.useState)(null),t=Object(o.a)(e,2),n=t[0],r=t[1],s=Object(a.useState)(null),i=Object(o.a)(s,2),u=i[0],l=i[1],p=Object(a.useState)(null),y=Object(o.a)(p,2),b=y[0],j=y[1],m=Object(a.useState)(0),f=Object(o.a)(m,2),h=f[0],g=f[1],v=Object(a.useState)([]),T=Object(o.a)(v,2),w=T[0],k=T[1],N=Object(a.useState)([]),B=Object(o.a)(N,2),E=B[0],_=B[1],L=function(){var e=Object(c.a)(d.a.mark((function e(){var t,n,a,r;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!window.celo){e.next=22;break}return e.prev=1,e.next=4,window.celo.enable();case 4:return t=new S.a(window.celo),n=Object(A.newKitFromWeb3)(t),e.next=8,n.web3.eth.getAccounts();case 8:return a=e.sent,r=a[0],n.defaultAccount=r,e.next=13,l(r);case 13:return e.next=15,j(n);case 15:e.next=20;break;case 17:e.prev=17,e.t0=e.catch(1),console.log(e.t0);case 20:e.next=23;break;case 22:alert("Error Occurred");case 23:case"end":return e.stop()}}),e,null,[[1,17]])})));return function(){return e.apply(this,arguments)}}(),H=Object(a.useCallback)(Object(c.a)(d.a.mark((function e(){var t,n,a;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,b.getTotalBalance(u);case 3:t=e.sent,n=t.cUSD.shiftedBy(-18).toFixed(2),a=new b.web3.eth.Contract(F,D),r(a),g(n),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(0),console.log(e.t0);case 13:case"end":return e.stop()}}),e,null,[[0,10]])}))),[u,b]),R=Object(a.useCallback)(Object(c.a)(d.a.mark((function e(){var t,a,r,s,i;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.methods.getCandidateLength().call();case 2:for(t=e.sent,a=[],r=function(e){var t=new Promise(function(){var t=Object(c.a)(d.a.mark((function t(a,r){var s;return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,n.methods.getCandidate(e).call();case 2:s=t.sent,a({index:e,candidateAddress:s[0],name:s[1],age:s[2],image:s[3],description:s[4],voteCount:s[5]});case 4:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}());a.push(t)},s=0;s<t;s++)r(s);return e.next=8,Promise.all(a);case 8:i=e.sent,k(i);case 10:case"end":return e.stop()}}),e)}))),[n]),U=Object(a.useCallback)(Object(c.a)(d.a.mark((function e(){var t;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,n.methods.getVotersList().call();case 3:t=e.sent,_(t),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.log({e:e.t0});case 10:case"end":return e.stop()}}),e,null,[[0,7]])}))),[n]),J=function(){var e=Object(c.a)(d.a.mark((function e(t,a,r,s,i){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,n.methods.addCandidate(t,a,r,s,i).send({from:u});case 3:R(),U(),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),alert(e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t,n,a,r,s){return e.apply(this,arguments)}}(),P=function(){var e=Object(c.a)(d.a.mark((function e(t){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,n.methods.giveVotingRight(t).send({from:u});case 3:R(),U(),alert("you have successfully given right to vote"),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),alert(e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t){return e.apply(this,arguments)}}(),z=function(){var e=Object(c.a)(d.a.mark((function e(t){var a,r;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,a=new b.web3.eth.Contract(V,"0x874069Fa1Eb16D44d622F2e0Ca25eeA172369bC1"),r=new M.a(1).shiftedBy(18).toString(),e.next=5,a.methods.approve(D,r).send({from:u});case 5:return e.next=7,n.methods.vote(t,r).send({from:u});case 7:R(),U(),H(),alert("you have successfully voted for this candidate"),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(0),alert(e.t0);case 16:case"end":return e.stop()}}),e,null,[[0,13]])})));return function(t){return e.apply(this,arguments)}}();return Object(a.useEffect)((function(){L()}),[]),Object(a.useEffect)((function(){b&&u&&H()}),[b,u,H]),Object(a.useEffect)((function(){n&&(R(),U())}),[n,R,U]),Object(x.jsxs)("div",{className:"App",children:[Object(x.jsx)(O,{cUSDBalance:h,addCandidate:J,giveVotingRight:P}),Object(x.jsx)(I,{voters:E}),Object(x.jsx)(C,{candidates:w,vote:z,walletAddress:u})]})},_=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,895)).then((function(t){var n=t.getCLS,a=t.getFID,r=t.getFCP,s=t.getLCP,i=t.getTTFB;n(e),a(e),r(e),s(e),i(e)}))};n(876),n(877);i.a.render(Object(x.jsx)(r.a.StrictMode,{children:Object(x.jsx)(E,{})}),document.getElementById("root")),_()}},[[880,1,2]]]);
//# sourceMappingURL=main.9c1a2641.chunk.js.map